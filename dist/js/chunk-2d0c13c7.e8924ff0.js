(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c13c7"],{"44d5":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-card-code",{attrs:{title:"Lobby","no-body":""}},[e("b-table",{staticClass:"mb-0",attrs:{fields:t.fields,items:t.items,responsive:"","tbody-tr-class":t.rowClass},scopedSlots:t._u([{key:"cell(customer)",fn:function(a){return[e("span",{staticClass:"text-nowrap"},[e("b-avatar",{staticClass:"mr-1",attrs:{src:a.value.avatar}}),e("span",{staticClass:"text-nowrap"},[t._v(t._s(a.value.username))])],1)]}},{key:"cell(girl)",fn:function(a){return[e("span",{staticClass:"text-nowrap"},[e("b-avatar",{staticClass:"mr-1",attrs:{src:a.value.avatar}}),e("span",{staticClass:"text-nowrap"},[t._v(t._s(a.value.username))])],1)]}},{key:"cell(lobbyTime)",fn:function(a){return[e("span",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.dateFormat(a.value))+" ")])]}},{key:"cell(id)",fn:function(a){return[e("b-button",{attrs:{variant:"gradient-success",size:"sm"},on:{click:function(e){return t.chatOpen(a.value)}}},[t._v(" Chat ")]),e("b-button",{staticClass:"ml-2",attrs:{variant:"gradient-danger",size:"sm"},on:{click:function(e){return t.openPushChat(a.value)}}},[t._v(" Push/Hold ")]),e("b-button",{staticClass:"ml-2",attrs:{variant:"gradient-primary",size:"sm"},on:{click:function(e){return t.openAssignModal(a.value)}}},[t._v(" Assign to ")]),"admin"==t.userData.role?e("b-button",{staticClass:"ml-2",attrs:{variant:"gradient-primary",size:"sm"},on:{click:function(e){return t.removeLobby(a.value)}}},[t._v(" Remove ")]):t._e()]}}])})],1),t.assignedItems.length?e("b-card-code",{attrs:{title:"Assinged to You","no-body":""}},[e("b-table",{staticClass:"mb-0",attrs:{fields:t.fields,items:t.assignedItems,responsive:"","tbody-tr-class":t.rowClass},scopedSlots:t._u([{key:"cell(customer)",fn:function(a){return[e("span",{staticClass:"text-nowrap"},[e("b-avatar",{staticClass:"mr-1",attrs:{src:a.value.avatar}}),e("span",{staticClass:"text-nowrap"},[t._v(t._s(a.value.username))])],1)]}},{key:"cell(girl)",fn:function(a){return[e("span",{staticClass:"text-nowrap"},[e("b-avatar",{staticClass:"mr-1",attrs:{src:a.value.avatar}}),e("span",{staticClass:"text-nowrap"},[t._v(t._s(a.value.username))])],1)]}},{key:"cell(lobbyTime)",fn:function(a){return[e("span",{staticClass:"text-nowrap"},[t._v(" "+t._s(t.dateFormat(a.value))+" ")])]}},{key:"cell(id)",fn:function(t){return[e("b-button",{staticClass:"btn-icon rounded-circle",attrs:{variant:"gradient-danger",size:"sm",to:{name:"moderator-chat",params:{chat_id:t.value}}}},[e("feather-icon",{attrs:{icon:"MessageSquareIcon"}})],1)]}}],null,!1,3444690680)})],1):t._e(),e("b-modal",{ref:"push-modal",attrs:{id:"push-modal",title:"Select time to push","ok-title":"cancel","ok-only":"",centered:""},model:{value:t.pushModalShow,callback:function(a){t.pushModalShow=a},expression:"pushModalShow"}},[e("b-form-group",[e("b-form-radio-group",{attrs:{id:"gender",options:t.pushTimeOptions,value:"male",stacked:""},model:{value:t.pushTime,callback:function(a){t.pushTime=a},expression:"pushTime"}})],1),e("b-button",{on:{click:t.pushChat}},[t._v(" Push chat ")])],1),e("b-modal",{ref:"assign-modal",attrs:{id:"assign-modal",title:"Select moderator to assign","ok-title":"cancel","ok-only":"",centered:""},model:{value:t.assignModalShow,callback:function(a){t.assignModalShow=a},expression:"assignModalShow"}},[e("b-form-group",[e("b-form-radio-group",{attrs:{options:t.moderators,value:"male",stacked:""},model:{value:t.assignModerator,callback:function(a){t.assignModerator=a},expression:"assignModerator"}})],1),e("b-button",{on:{click:t.assignChat}},[t._v(" Assign ")])],1)],1)},o=[],n=(e("159b"),e("541c")),i=e("29a1"),l=e("1947"),r=e("e8a3"),c=e("6aac"),u=e("2924"),d=e("8226"),h=e("7100"),m=e("4360"),b=e("c1df"),p=e.n(b),f=e("8b71"),v={components:{BTable:i["a"],BButton:l["a"],BCardCode:n["a"],BAvatar:r["a"],BModal:c["a"],BFormRadioGroup:u["a"],BFormGroup:d["a"]},data:function(){return{fields:[{key:"customer",label:"Client"},{key:"girl",label:"Girl"},{key:"lobbyTime",label:"Time"},{key:"id",label:"Action"}],items:[],assignedItems:[],lobbySocket:m["a"].state.appConfig.lobbySocket,pushModalShow:!1,assignModalShow:!1,pushChatIdSelected:0,pushTimeOptions:[{text:"5min",value:5},{text:"15min",value:10},{text:"30min",value:30},{text:"45min",value:45},{text:"1h",value:60},{text:"1h 15min",value:75},{text:"1h 30min",value:90},{text:"1h 45min",value:105},{text:"2h",value:120},{text:"3h",value:180},{text:"4h",value:240},{text:"5h",value:300}],pushTime:"1h",userName:JSON.parse(localStorage.getItem("userData")).username,assignChatIdSelected:null,assignModerator:null,moderators:[],userData:Object(f["b"])()}},mounted:function(){var t=this;this.fetchLobby(),this.fetchModerators(),this.lobbySocket.onmessage=function(a){var e=JSON.parse(a.data),s=e.command,o=e.content;"send_notification"===s&&("remove-lobby"!==o&&"add-lobby"!==o||t.fetchLobby())}},methods:{dateFormat:function(t){return p()(t).local().format("HH:mm - DD/MM")},fetchModerators:function(){var t=this;h["a"].getModerators().then((function(a){t.moderators=[];var e=a.data;e.forEach((function(a){t.moderators.push(a.username)}))})).catch((function(t){console.log(t)}))},fetchLobby:function(){var t=this;h["a"].getLobbies({}).then((function(a){t.items=a.data,console.log(t.items)})).catch((function(t){console.log(t)})),h["a"].getAssigned().then((function(a){t.assignedItems=a.data,console.log(t.assignedItems)})).catch((function(t){console.log(t)}))},rowClass:function(t,a){if(t&&"row"===a)return"remind"===t.status?"table-reminder":void 0},chatOpen:function(t){var a=this,e={chatId:t,moderator:this.userName};console.log("assigned"),h["a"].assignChat(e).then((function(e){console.log(e.data),a.$router.push({name:"moderator-chat",params:{chat_id:t}})})).catch((function(t){alert(t)}))},openPushChat:function(t){this.pushChatIdSelected=t,this.pushModalShow=!0},openAssignModal:function(t){this.assignChatIdSelected=t,this.assignModalShow=!0},pushChat:function(){this.pushModalShow=!1,h["a"].pushChat({chatId:this.pushChatIdSelected,pushTime:this.pushTime}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t)}))},assignChat:function(){this.assignModalShow=!1;var t={chatId:this.assignChatIdSelected,moderator:this.assignModerator};h["a"].assignChat(t).then((function(t){console.log(t.data)})).catch((function(t){console.log(t)}))},removeLobby:function(t){var a={chatId:t};h["a"].inactiveChat(a).then((function(t){console.log(t.data)})).catch((function(t){console.log(t)}))}}},g=v,C=e("2877"),k=Object(C["a"])(g,s,o,!1,null,null,null);a["default"]=k.exports}}]);
//# sourceMappingURL=chunk-2d0c13c7.e8924ff0.js.map