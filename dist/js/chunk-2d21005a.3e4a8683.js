(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21005a"],{b5b3:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-card-code",{attrs:{title:"Affiliate List","no-body":""}},[e("b-table",{staticClass:"mb-0",attrs:{fields:t.fields,items:t.customers,responsive:"","tbody-tr-class":t.rowClass},scopedSlots:t._u([{key:"cell(customer)",fn:function(a){return[e("span",{staticClass:"text-nowrap"},[e("b-avatar",{staticClass:"mr-1",attrs:{src:a.item.customer.avatar}}),e("span",{staticClass:"text-nowrap"},[t._v(t._s(a.item.customer.username))])],1)]}},{key:"cell(moderator)",fn:function(a){return[e("span",{staticClass:"text-nowrap"},[e("b-avatar",{staticClass:"mr-1",attrs:{src:a.item.moderator.avatar}}),e("span",{staticClass:"text-nowrap"},[t._v(t._s(a.item.moderator.username))])],1)]}},{key:"cell(id)",fn:function(a){return[e("b-button",{staticClass:"ml-0",attrs:{variant:"gradient-primary",size:"sm"},on:{click:function(e){return t.removeCancel(a.item.id)}}},[t._v(" Cancel ")])]}}])})],1),e("b-modal",{ref:"assign-modal",attrs:{id:"assign-modal",title:"Select moderator to assign","ok-title":"cancel","ok-only":"",centered:""},model:{value:t.assignModalShow,callback:function(a){t.assignModalShow=a},expression:"assignModalShow"}},[e("b-form-group",[e("b-form-radio-group",{attrs:{options:t.moderators,value:"male",stacked:""},model:{value:t.assignModerator,callback:function(a){t.assignModerator=a},expression:"assignModerator"}})],1),e("b-button",{on:{click:t.assignChat}},[t._v(" Affiliate ")])],1)],1)},s=[],n=(e("159b"),e("ac1f"),e("1276"),e("541c")),r=e("29a1"),i=e("1947"),l=e("e8a3"),c=e("6aac"),u=e("2924"),d=e("8226"),f=e("7100"),m=e("4360"),h={components:{BTable:r["a"],BButton:i["a"],BCardCode:n["a"],BAvatar:l["a"],BModal:c["a"],BFormRadioGroup:u["a"],BFormGroup:d["a"]},data:function(){return{fields:[{key:"customer",label:"Customer"},{key:"moderator",label:"Moderator"},{key:"id",label:"Delete"}],items:[],assignedItems:[],lobbySocket:m["a"].state.appConfig.lobbySocket,assignModalShow:!1,pushTime:"1h",userName:JSON.parse(localStorage.getItem("userData")).username,assignChatIdSelected:null,assignModerator:null,moderators:[],customers:[]}},mounted:function(){this.fetchModerators(),this.fetchAffiliateList()},methods:{fetchAffiliateList:function(){var t=this;f["a"].getAffiliateList("all").then((function(a){t.customers=a.data})).catch((function(t){console.log(t)}))},fetchModerators:function(){var t=this;f["a"].getModerators().then((function(a){t.moderators=[];var e=a.data;e.forEach((function(a){t.moderators.push(a.username)})),console.log(t.moderators)})).catch((function(t){console.log(t)}))},rowClass:function(t,a){if(t&&"row"===a)return"remind"===t.status?"table-reminder":void 0},removeCancel:function(t){var a=this;f["a"].deleteAffiliate(t).then((function(t){console.log(t),a.fetchAffiliateList()})).catch((function(t){console.log(t)}))},assignChat:function(){var t=this;this.assignModalShow=!1;var a={customer:this.assignChatIdSelected,moderator:this.assignModerator,config:"0.8"};f["a"].createAffiliate(a).then((function(a){console.log(a.data),t.fetchNewCustomers()})).catch((function(t){console.log(t)}))},dateFormat:function(t){return t.split("T")[0]}}},g=h,b=e("2877"),p=Object(b["a"])(g,o,s,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d21005a.3e4a8683.js.map