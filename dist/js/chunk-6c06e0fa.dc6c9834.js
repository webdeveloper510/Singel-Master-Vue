(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c06e0fa"],{"739b":function(t,e,a){},"8cd8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"inherit"}},[a("section",{staticClass:"chat-app-window"},[t.activeChat.girl?a("div",{staticClass:"active-chat"},[a("div",{staticClass:"chat-navbar"},[t.activeChat?a("header",{staticClass:"chat-header chat-log"},[a("b-form-textarea",{attrs:{placeholder:"Write logs"},on:{mouseout:t.updateChatLog},model:{value:t.activeChat.long_log,callback:function(e){t.$set(t.activeChat,"long_log",e)},expression:"activeChat.long_log"}}),a("div",{staticClass:"d-none align-items-center d-none"},[a("div",{staticClass:"sidebar-toggle d-block d-lg-none mr-1"},[a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"MenuIcon",size:"21"},on:{click:function(e){t.mqShallShowLeftSidebar=!0}}})],1),a("b-avatar",{staticClass:"mr-1 cursor-pointer badge-minimal",attrs:{size:"36",src:t.activeChat.girl.avatar,badge:"","badge-variant":t.resolveAvatarBadgeVariant(t.activeChat.girl.status)}}),a("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t.activeChat.girl.username)+" ")])],1)],1):t._e()]),a("vue-perfect-scrollbar",{ref:"refChatLogPS",staticClass:"user-chats scroll-area user-chats-log",attrs:{settings:t.perfectScrollbarSettings}},[a("chat-log",{attrs:{"chat-data":t.activeChat,"profile-user-avatar":t.activeChat.girl.avatar}})],1),a("b-form",{staticClass:"chat-app-form",on:{submit:function(e){return e.preventDefault(),t.sendMessage.apply(null,arguments)}}},[a("b-input-group",{staticClass:"input-group-merge form-send-message mr-1"},[a("b-form-input",{attrs:{placeholder:"Skriv ditt meddelande"},model:{value:t.chatInputMessage,callback:function(e){t.chatInputMessage=e},expression:"chatInputMessage"}})],1),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-photo",modifiers:{"modal-photo":!0}}],staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(" photo ")]),a("b-button",{attrs:{variant:"primary",type:"submit"}},[t._v(" Send ")])],1)],1):a("div")]),t.activeChat.girl?a("chat-active-chat-content-details-sidedbar",{attrs:{"shall-show-active-chat-contact-sidebar":t.shallShowActiveChatContactSidebar,contact:t.activeChat.customer||{},"log-data":t.activeChat.customer_log,"chat-id":t.activeChat?t.activeChat.id:null},on:{"update:shallShowActiveChatContactSidebar":function(e){t.shallShowActiveChatContactSidebar=e},"update:shall-show-active-chat-contact-sidebar":function(e){t.shallShowActiveChatContactSidebar=e}}}):t._e(),a("portal",{attrs:{to:"content-renderer-sidebar-left"}},[t.activeChat.girl?a("chat-left-sidebar",{attrs:{"chats-contacts":t.chatsContacts,"model-data":t.activeChat.girl,"log-data":t.activeChat.girl_log,"active-chat-contact-id":t.activeChat?t.activeChat.id:null,"mq-shall-show-left-sidebar":t.mqShallShowLeftSidebar},on:{"update:mqShallShowLeftSidebar":function(e){t.mqShallShowLeftSidebar=e},"update:mq-shall-show-left-sidebar":function(e){t.mqShallShowLeftSidebar=e},"open-chat":t.openChatOfContact}}):t._e()],1),a("b-modal",{ref:"modal-photo",attrs:{id:"modal-photo",title:"Select Photo","ok-title":"Cancel","ok-only":"",size:"lg"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("div",{staticClass:"p-1"},[a("b-card",[a("b-card-title",{staticClass:"mb-0"},[t._v(" Photos ")]),a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"images-wrapper d-block",staticStyle:{width:"100%"}},t._l(t.chatPhotos,(function(e,i){return a("div",{key:i,staticClass:"image mr-2",class:t.selectedImage===e?"selected":null,style:{backgroundImage:"url("+e.photo+")"},on:{click:function(a){t.selectedImage=e}}})})),0)]),a("b-card-title",{staticClass:"mt-2"},[t._v(" Captions ")]),a("b-form-input",{attrs:{placeholder:"Input your message"},model:{value:t.imageCaption,callback:function(e){t.imageCaption=e},expression:"imageCaption"}}),a("b-button",{staticClass:"mt-1",attrs:{variant:"primary"},on:{click:function(e){return t.sendFile()}}},[t._v(" Send ")])],1)],1)])],1)},s=[],r=(a("7db0"),a("99af"),a("ed09")),o=a("e8a3"),n=a("11de"),l=a("5e12"),c=a("4797"),u=a("1947"),d=a("6aac"),h=a("205f"),b=a("4968"),f=a("9c7d"),m=a("e6c7"),g=a("9d63"),p=a.n(g),v=a("1dff"),y=a("1bd7"),C=a("4360"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-left"},[a("div",{staticClass:"sidebar"},[a("user-profile-sidebar",{attrs:{"shall-show-user-profile-sidebar":!0,"profile-user-data":t.modelData,"log-data":t.logData,"chat-id":t.activeChatContactId},on:{"close-sidebar":function(e){return t.$emit("update:shall-show-user-profile-sidebar",!1)}}}),a("div",{staticClass:"sidebar-content",class:{show:t.mqShallShowLeftSidebar}},[a("span",{staticClass:"sidebar-close-icon"},[a("feather-icon",{attrs:{icon:"XIcon",size:"16"},on:{click:function(e){return t.$emit("update:mq-shall-show-left-sidebar",!1)}}})],1),a("vue-perfect-scrollbar",{staticClass:"chat-user-list-wrapper list-group scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[a("h4",{staticClass:"chat-list-title"},[t._v(" Model Information ")]),a("ul",{staticClass:"chat-users-list chat-list media-list"},t._l(t.filteredChatsContacts,(function(e){return a("chat-contact",{key:e.id,class:{active:t.activeChatContactId===e.id},attrs:{user:e,tag:"li","is-chat-contact":""},on:{click:function(a){return t.$emit("open-chat",e.id)}}})})),1)])],1)],1)])},k=[],S=(a("a9e3"),a("caad"),a("2532"),a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(t.tag,t._g({tag:"component"},t.$listeners),[a("b-avatar",{staticClass:"badge-minimal",attrs:{size:"42",src:t.user.customer.avatar,badge:t.isChatContact,"badge-variant":t.resolveAvatarBadgeVariant(t.user.status),variant:"transparent"}}),a("div",{staticClass:"chat-info flex-grow-1"},[a("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.user.customer.username)+" ")]),a("p",{staticClass:"card-text text-truncate"},[t._v(" "+t._s(t.isChatContact?t.user.lastMessage:t.user.about)+" ")])]),t.isChatContact?a("div",{staticClass:"chat-meta text-nowrap"},[t.user.unseenMsgs?a("b-badge",{staticClass:"float-right",attrs:{pill:"",variant:"primary"}},[t._v(" "+t._s(t.user.unseenMsgs)+" ")]):t._e()],1):t._e()],1)}),w=[],j=a("e98b"),O=a("0e20");function x(){var t=function(t){return"online"===t?"success":"busy"===t?"danger":"away"===t?"warning":"secondary"};return{resolveAvatarBadgeVariant:t}}var D={components:{BAvatar:o["a"],BBadge:j["a"]},props:{tag:{type:String,default:"div"},user:{type:Object,required:!0},isChatContact:{type:Boolean,dedfault:!1}},setup:function(){var t=x(),e=t.resolveAvatarBadgeVariant;return{formatDateToMonthShort:O["b"],resolveAvatarBadgeVariant:e}}},I=D,L=a("2877"),B=Object(L["a"])(I,S,w,!1,null,null,null),P=B.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat-profile-sidebar",class:{show:t.shallShowUserProfileSidebar}},[a("header",{staticClass:"chat-profile-header"},[a("div",{staticClass:"header-profile-sidebar"},[a("div",{staticClass:"avatar box-shadow-1 avatar-xl avatar-border"},[a("b-avatar",{attrs:{size:"70",src:t.profileUserData.avatar}}),a("span",{staticClass:"avatar-status-xl",class:"avatar-status-"+t.profileUserData.status})],1),a("h4",{staticClass:"chat-user-name"},[t._v(" "+t._s(t.profileUserData.username)+" ( "+t._s(t.profileUserData.age)+" ) ")]),a("span",{staticClass:"user-post text-capitalize"},[t._v(t._s(t.profileUserData.county)+" , "+t._s(t.profileUserData.city)+" ")])])]),a("vue-perfect-scrollbar",{staticClass:"profile-sidebar-area scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[a("b-form-textarea",{staticClass:"about-user",attrs:{rows:"3",size:"sm",placeholder:"about me"},model:{value:t.girlLogData.about_me,callback:function(e){t.$set(t.girlLogData,"about_me",e)},expression:"girlLogData.about_me"}}),a("b-form-textarea",{staticClass:"about-user mt-1",attrs:{rows:"5",size:"sm",placeholder:"logs"},model:{value:t.girlLogData.log,callback:function(e){t.$set(t.girlLogData,"log",e)},expression:"girlLogData.log"}}),a("div",{staticClass:"mt-2"}),t._l(t.logFields,(function(e){return a("b-form-group",{key:e.key,staticClass:"mb-25",attrs:{"label-cols":"4",label:e.label,"label-for":"id-"+e.key,"label-size":"sm"}},[a("b-form-input",{attrs:{id:"id-"+e.key,size:"sm"},model:{value:t.girlLogData[e.key],callback:function(a){t.$set(t.girlLogData,e.key,a)},expression:"girlLogData[field.key]"}})],1)})),a("div",{staticClass:"mt-1 text-right"},[a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:t.updateLog}},[t._v(" Save ")])],1),a("div",{staticClass:"mt-2"}),t._l(t.profileFields,(function(e){return a("b-form-group",{key:e.key,staticClass:"mb-25",attrs:{"label-cols":"4",label:e.label,"label-for":"id-"+e.key,"label-size":"sm"}},[a("b-form-input",{attrs:{id:"id-"+e.key,size:"sm",readonly:""},model:{value:t.userDataInfo[e.key],callback:function(a){t.$set(t.userDataInfo,e.key,a)},expression:"userDataInfo[field.key]"}})],1)}))],2)],1)},A=[],M=a("8226"),F=a("7100"),z={components:{BAvatar:o["a"],BButton:u["a"],BFormTextarea:f["a"],BFormGroup:M["a"],BFormInput:c["a"],VuePerfectScrollbar:p.a},props:{shallShowUserProfileSidebar:{type:Boolean,required:!0},profileUserData:{type:Object,required:!0},logData:{type:Object,default:null},chatId:{type:Number,default:null}},data:function(){return{logFields:[{label:"Name",key:"name"},{label:"Family",key:"family"},{label:"Work",key:"work"},{label:"Cars",key:"cars"},{label:"Civil Status",key:"civil_status"},{label:"Foods Drinks",key:"foods_drinks"},{label:"Hobbies",key:"hobbies"},{label:"Living Condition",key:"living_condition"},{label:"Personalities",key:"personalities"},{label:"Pets",key:"pets"},{label:"Sexual Interests",key:"sexual_interests"}],profileFields:[{label:"Status",key:"status"},{label:"Ethnicity",key:"ethnicity"},{label:"Hair Color",key:"hair_color"},{label:"Eye Color",key:"eye_color"},{label:"Body Type",key:"body_type"},{label:"Smoking Habit",key:"smoking_habit"},{label:"Drinking Habit",key:"drinking_habit"},{label:"Sexual Position",key:"sexual_position"},{label:"Children",key:"children"},{label:"Height",key:"height"}]}},setup:function(t){var e={maxScrollbarLength:150},a=Object(r["ref"])({}),i=Object(r["ref"])(0);t.logData?(a.value=t.logData,i.value=t.logData.id):a.value={about_me:"",cars:"",civil_status:"",family:"",foods_drinks:"",hobbies:"",living_condition:"",log:"",name:"",personalities:"",pets:"",sexual_interests:"",user_type:"model",work:""};var s=Object(r["ref"])({username:"",first_name:"",last_name:"",email:"",gender:"Kvinna",seeking:"Man",birthday:null,county:"",city:"",status:"Föredrar att inte säga",ethnicity:"Ej angivet",hair_color:"Ej angivet",eye_color:"Ej angivet",body_type:"Ej angivet",smoking_habit:"Ej angivet",drinking_habit:"Ej angivet",sexual_position:"Ej angivet",children:"Ej angivet",height:"Ej angivet",about_me:"jjj"}),o=[{text:"Active",value:"online",radioVariant:"success"},{text:"Do Not Disturb",value:"busy",radioVariant:"danger"},{text:"Away",value:"away",radioVariant:"warning"},{text:"Offline",value:"offline",radioVariant:"secondary"}];return{perfectScrollbarSettings:e,userStatusOptions:o,userDataInfo:s,girlLogData:a,girlLogId:i}},methods:{updateLog:function(){if(this.girlLogId)F["a"].updateLog(this.girlLogId,this.girlLogData).then((function(t){console.log(t)}));else{var t={chatId:this.$props.chatId,logData:this.girlLogData};F["a"].createLog(t).then((function(t){console.log(t)}))}}}},$=z,q=(a("baaa"),Object(L["a"])($,E,A,!1,null,"341cf222",null)),T=q.exports,V={components:{VuePerfectScrollbar:p.a,ChatContact:P,UserProfileSidebar:T},props:{chatsContacts:{type:Array,required:!0},modelData:{type:Object,required:!0},logData:{type:Object,default:null},activeChatContactId:{type:Number,default:null},mqShallShowLeftSidebar:{type:Boolean,required:!0}},setup:function(t){var e={maxScrollbarLength:150},a=function(e){return t.contacts.find((function(t){return t.id===e}))},i=Object(r["ref"])(""),s=function(t){return t.customer.username.toLowerCase().includes(i.value.toLowerCase())},o=Object(r["computed"])((function(){return t.chatsContacts.filter(s)})),n=Object(r["computed"])((function(){return t.contacts.filter(s)}));return{searchQuery:i,filteredChatsContacts:o,filteredContacts:n,resolveChatContact:a,perfectScrollbarSettings:e}}},H=V,R=Object(L["a"])(H,_,k,!1,null,null,null),U=R.exports,N=(a("d3b7"),a("7f80")),J={namespaced:!0,state:{},getters:{},mutations:{},actions:{fetchChatsAndContacts:function(){return new Promise((function(t,e){N["a"].get("http://127.0.0.1:8000/api/chat/").then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},getProfileUser:function(){return new Promise((function(t,e){N["a"].get("/apps/chat/users/profile-user").then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},getChatPhotos:function(t,e){var a=e.girlId;return new Promise((function(t,e){N["a"].get("http://127.0.0.1:8000/api/moderator/model-photo/?model_id=".concat(a,"&private=1")).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},getChat:function(t,e){var a=e.chatId;return new Promise((function(t,e){N["a"].get("http://127.0.0.1:8000/api/chat/detail/".concat(a,"/")).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},sendMessage:function(t,e){var a=e.contactId,i=e.message,s=e.senderId;return new Promise((function(t,e){N["a"].post("/apps/chat/chats/".concat(a),{message:i,senderId:s}).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))}}},W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chats"},[a("CoolLightBox",{attrs:{items:t.formattedChatData.images.value,index:t.index1,effect:"fade"},on:{close:function(e){t.index1=null}}}),t._l(t.formattedChatData.formattedChatLog,(function(e,i){return a("div",{key:e.senderId+String(i),staticClass:"chat",class:{"chat-left":e.senderId===t.formattedChatData.contact.id}},[a("div",{staticClass:"chat-avatar"},[a("b-avatar",{staticClass:"avatar-border-2 box-shadow-1",attrs:{size:"36",variant:"transparent",src:e.senderId===t.formattedChatData.contact.id?t.formattedChatData.contact.avatar:t.profileUserAvatar}})],1),a("div",{staticClass:"chat-body"},t._l(e.messages,(function(i){return a("div",{key:i.time,staticClass:"chat-content"},["Image"!==i.msg?a("p",[t._v(" "+t._s(i.msg)+" ")]):t._e(),t.checkText(i.type)?a("img",{class:"Image"!==i.msg?"mt-1":null,staticStyle:{width:"100px",height:"100px"},attrs:{alt:"",src:i.file_url},on:{click:function(e){t.index1=i.imageIndex}}}):t._e(),a("p",{staticClass:"mt-1 message-time"},[t._v(" "+t._s(t.dateFormat(i.time))+" ")]),e.senderId!==t.formattedChatData.contact.id?a("p",{staticClass:"message-username"},[t._v(" ( "+t._s(i.sender_username)+" ) ")]):t._e()])})),0)])}))],2)},G=[],Y=(a("159b"),a("c1df")),K=a.n(Y),Q={components:{BAvatar:o["a"]},props:{chatData:{type:Object,required:!0},profileUserAvatar:{type:String,required:!0}},setup:function(t){var e=Object(r["ref"])(null),a=Object(r["computed"])((function(){var e={id:t.chatData.customer.id,avatar:t.chatData.customer.avatar},a=[];t.chatData.messages&&(a=t.chatData.messages);var i=[],s=a[0]?a[0].sender:void 0,o={senderId:s,messages:[]},n=Object(r["ref"])([]),l=-1;return a.forEach((function(t,e){"file"===t.tag&&(n.value.push(t.file_url),l+=1),s===t.sender?o.messages.push({msg:t.content,time:t.timestamp,type:t.tag,file_url:t.file_url,sender_username:t.sender_username,imageIndex:l}):(s=t.sender,i.push(o),o={senderId:t.sender,messages:[{msg:t.content,time:t.timestamp,type:t.tag,file_url:t.file_url,sender_username:t.sender_username,imageIndex:l}]}),e===a.length-1&&i.push(o)})),{formattedChatLog:i,contact:e,profileUserAvatar:"",images:n}}));return{formattedChatData:a,index1:e}},mounted:function(){console.log(this.formattedChatData.images.value)},methods:{checkText:function(t){return"file"===t},dateFormat:function(t){return K()(t).local().format("HH:mm-DD/MM")}}},X=Q,Z=Object(L["a"])(X,W,G,!1,null,null,null),tt=Z.exports,et=a("a18c"),at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-profile-sidebar",class:{show:t.shallShowActiveChatContactSidebar}},[t.contact?a("header",{staticClass:"user-profile-header"},[a("div",{staticClass:"header-profile-sidebar"},[a("div",{staticClass:"avatar box-shadow-1 avatar-xl avatar-border"},[a("b-avatar",{attrs:{size:"70",src:t.contact.avatar}}),a("span",{staticClass:"avatar-status-xl",class:"avatar-status-"+t.contact.status})],1),a("h4",{staticClass:"chat-user-name"},[t._v(" "+t._s(t.contact.username)+" ( "+t._s(t.contact.age)+" ) ")]),a("span",{staticClass:"user-post text-capitalize"},[t._v(t._s(t.contact.county)+" , "+t._s(t.contact.city))])])]):t._e(),a("vue-perfect-scrollbar",{staticClass:"user-profile-sidebar-area scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[a("b-form-textarea",{staticClass:"about-user mt-1",attrs:{rows:"5",size:"sm",placeholder:"about me",readonly:""},model:{value:t.contact.about_me,callback:function(e){t.$set(t.contact,"about_me",e)},expression:"contact.about_me"}}),a("b-form-textarea",{staticClass:"about-user mt-1",attrs:{rows:"5",size:"sm",placeholder:"logs"},model:{value:t.girlLogData.log,callback:function(e){t.$set(t.girlLogData,"log",e)},expression:"girlLogData.log"}}),a("div",{staticClass:"mt-2"}),t._l(t.logFields,(function(e){return a("b-form-group",{key:e.key,staticClass:"mb-25",attrs:{"label-cols":"4",label:e.label,"label-for":"id-"+e.key,"label-size":"sm"}},[a("b-form-input",{attrs:{id:"id-"+e.key,size:"sm"},model:{value:t.girlLogData[e.key],callback:function(a){t.$set(t.girlLogData,e.key,a)},expression:"girlLogData[field.key]"}})],1)})),a("div",{staticClass:"mt-1 text-right"},[a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:t.updateLog}},[t._v(" Save ")])],1),a("div",{staticClass:"mt-2"}),t._l(t.profileFields,(function(e){return a("b-form-group",{key:e.key,staticClass:"mb-25",attrs:{"label-cols":"4",label:e.label,"label-for":"id-"+e.key,"label-size":"sm"}},[a("b-form-input",{attrs:{id:"id-"+e.key,size:"sm",readonly:""},model:{value:t.userDataInfo[e.key],callback:function(a){t.$set(t.userDataInfo,e.key,a)},expression:"userDataInfo[field.key]"}})],1)}))],2)],1)},it=[],st={components:{BAvatar:o["a"],BButton:u["a"],BFormTextarea:f["a"],BFormGroup:M["a"],BFormInput:c["a"],VuePerfectScrollbar:p.a},props:{shallShowActiveChatContactSidebar:{type:Boolean,required:!0},contact:{type:Object,required:!0},logData:{type:Object,default:null},chatId:{type:Number,default:null}},data:function(){return{logFields:[{label:"Name",key:"name"},{label:"Family",key:"family"},{label:"Work",key:"work"},{label:"Cars",key:"cars"},{label:"Civil Status",key:"civil_status"},{label:"Foods Drinks",key:"foods_drinks"},{label:"Hobbies",key:"hobbies"},{label:"Living Condition",key:"living_condition"},{label:"Personalities",key:"personalities"},{label:"Pets",key:"pets"},{label:"Sexual Interests",key:"sexual_interests"}],profileFields:[{label:"Status",key:"status"},{label:"Ethnicity",key:"ethnicity"},{label:"Hair Color",key:"hair_color"},{label:"Eye Color",key:"eye_color"},{label:"Body Type",key:"body_type"},{label:"Smoking Habit",key:"smoking_habit"},{label:"Drinking Habit",key:"drinking_habit"},{label:"Sexual Position",key:"sexual_position"},{label:"Children",key:"children"},{label:"Height",key:"height"}]}},setup:function(t){var e={maxScrollbarLength:150},a=Object(r["ref"])({}),i=Object(r["ref"])(0);t.logData?(a.value=t.logData,i.value=t.logData.id):a.value={about_me:"",cars:"",civil_status:"",family:"",foods_drinks:"",hobbies:"",living_condition:"",log:"",name:"",personalities:"",pets:"",sexual_interests:"",user_type:"user",work:""};var s=Object(r["ref"])({username:"",first_name:"",last_name:"",email:"",gender:"Kvinna",seeking:"Man",birthday:null,county:"",city:"",status:"Föredrar att inte säga",ethnicity:"Ej angivet",hair_color:"Ej angivet",eye_color:"Ej angivet",body_type:"Ej angivet",smoking_habit:"Ej angivet",drinking_habit:"Ej angivet",sexual_position:"Ej angivet",children:"Ej angivet",height:"Ej angivet",about_me:"jjj"}),o=[{text:"Active",value:"online",radioVariant:"success"},{text:"Do Not Disturb",value:"busy",radioVariant:"danger"},{text:"Away",value:"away",radioVariant:"warning"},{text:"Offline",value:"offline",radioVariant:"secondary"}];return{perfectScrollbarSettings:e,userStatusOptions:o,userDataInfo:s,girlLogData:a,girlLogId:i}},methods:{updateLog:function(){if(this.girlLogId)F["a"].updateLog(this.girlLogId,this.girlLogData).then((function(t){console.log(t)}));else{var t={chatId:this.$props.chatId,logData:this.girlLogData};F["a"].createLog(t).then((function(t){console.log(t)}))}}}},rt=st,ot=Object(L["a"])(rt,at,it,!1,null,null,null),nt=ot.exports,lt=a("12a4"),ct={components:{BAvatar:o["a"],BForm:n["a"],BInputGroup:l["a"],BFormInput:c["a"],BButton:u["a"],BModal:d["a"],BCard:h["a"],BCardTitle:b["a"],VuePerfectScrollbar:p.a,ChatLeftSidebar:U,ChatActiveChatContentDetailsSidedbar:nt,ChatLog:tt,BFormTextarea:f["a"]},directives:{"b-modal":m["a"]},data:function(){return{imageCaption:"",selectedImage:null,time:0}},setup:function(){var t="app-chat";C["a"].hasModule(t)||C["a"].registerModule(t,J),Object(r["onUnmounted"])((function(){C["a"].hasModule(t)&&C["a"].unregisterModule(t)}));var e=x(),a=e.resolveAvatarBadgeVariant,i=Object(r["ref"])(null),s=function(){var t=i.value.$el||i.value;t.scrollTop=t.scrollHeight},o=Object(r["ref"])([]),n=Object(r["ref"])([]),l=Object(r["ref"])({}),c=lt["a"].socketHost,u=Object(r["ref"])(!1),d=Object(r["ref"])(C["a"].state.appConfig.lobbySocket),h=Object(r["ref"])(JSON.parse(localStorage.getItem("userData"))),b=function(){C["a"].dispatch("app-chat/fetchChatsAndContacts").then((function(t){o.value=t.data}))},f=Object(r["ref"])([]),m=function(t){C["a"].dispatch("app-chat/getChatPhotos",{girlId:t}).then((function(t){f.value=t.data}))};b();var g=Object(r["ref"])({}),p=Object(r["ref"])(""),_=Object(r["ref"])({id:0}),k=function(t){p.value="",C["a"].dispatch("app-chat/getChat",{chatId:t}).then((function(e){g.value=e.data,"assign"===g.value.status?g.value.assigned_moderator&&g.value.assigned_moderator.id!==h.value.id&&(alert("You have not permission!"),et["a"].push({name:"moderator-lobby"})):(alert("You have not permission!"),et["a"].push({name:"moderator-lobby"})),_.value.id=setTimeout((function(){F["a"].activeChat(g.value.id,{active:1}),et["a"].push({name:"moderator-lobby"}),alert("time out")}),3e5);var a=o.value.find((function(e){return e.id===t}));a&&(a.unseenMsgs=0),m(g.value.girl.id),Object(r["nextTick"])((function(){s()}))}));var e=new WebSocket("ws://".concat(c,"/ws/chat/").concat(t,"/"));e.onopen=function(t){console.log("chat socket opened!",t)},e.onclose=function(t){console.error("chat socket closed unexpectedly!",t)},e.onmessage=function(t){var e=JSON.parse(t.data),a=e.message;g.value.messages.push(a),p.value="",Object(r["nextTick"])((function(){s()}))},l.value=e,D.value=!1},S=function(){if(p.value){var t={command:"new_message",tag:"text",message:{content:p.value,file_url:"",file_name:"",file_size:""},senderType:"model",chatId:g.value.id,senderId:h.value.id};l.value.send(JSON.stringify(t)),d.value.send(JSON.stringify({command:"send_notification",content:{chatId:g.value.id,senderType:"model"}})),et["a"].push({name:"moderator-lobby"}),F["a"].getRevenue().then((function(t){C["a"].commit("appConfig/UPDATE_REVENUE",t.data.revenue)}))}},w={maxScrollbarLength:150},j=Object(r["ref"])(!1),O=Object(y["a"])(),D=O.mqShallShowLeftSidebar,I=function(){C["a"].state.app.windowWidth<v["a"].lg&&(D.value=!0)},L=Object(r["ref"])(!0);return k(et["a"].currentRoute.params.chat_id),{resolveAvatarBadgeVariant:a,chatsContacts:o,contacts:n,refChatLogPS:i,activeChat:g,chatInputMessage:p,openChatOfContact:k,sendMessage:S,mySocket:l,profileUserDataMinimal:h,shallShowUserProfileSidebar:j,perfectScrollbarSettings:w,startConversation:I,mqShallShowLeftSidebar:D,shallShowActiveChatContactSidebar:L,modalShow:u,chatPhotos:f,getChatPhotos:m,timer:_}},beforeDestroy:function(){console.log("timer out,"),console.log("timer out,",this.timer.id),this.timer.id&&clearInterval(this.timer.id)},methods:{sendFile:function(){if(this.selectedImage){var t={command:"new_message",tag:"file",message:{content:this.imageCaption?this.imageCaption:"Image",file_url:this.selectedImage.photo,file_name:"",file_size:""},senderType:"model",chatId:this.activeChat.id,senderId:this.activeChat.girl.id};this.mySocket.send(JSON.stringify(t)),this.$router.push({name:"moderator-lobby"})}},updateChatLog:function(){console.log("chat long log:",this.activeChat.long_log),F["a"].activeChat(this.activeChat.id,{long_log:this.activeChat.long_log})}}},ut=ct,dt=(a("e81c"),Object(L["a"])(ut,i,s,!1,null,"0a99ff28",null));e["default"]=dt.exports},"9c7d":function(t,e,a){"use strict";a.d(e,"a",(function(){return z}));var i=a("2b0e"),s=a("c637"),r=a("a723"),o=a("906c"),n=a("7b1e"),l=a("a8c8"),c=a("3a58"),u=a("d82f"),d=a("cf75"),h=a("dde7"),b=a("06d9"),f=a("ad47"),m=a("d520"),g=a("40fc"),p=a("1f1e"),v=a("90ef"),y=a("602d"),C=a("bc9a"),_=a("992e"),k=a("3c21");function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function j(t,e,a){return e&&w(t.prototype,e),a&&w(t,a),t}var O="__bv__visibility_observer",x=function(){function t(e,a,i){S(this,t),this.el=e,this.callback=a.callback,this.margin=a.margin||0,this.once=a.once||!1,this.observer=null,this.visible=void 0,this.doneOnce=!1,this.createObserver(i)}return j(t,[{key:"createObserver",value:function(t){var e=this;if(this.observer&&this.stop(),!this.doneOnce&&Object(n["f"])(this.callback)){try{this.observer=new IntersectionObserver(this.handler.bind(this),{root:null,rootMargin:this.margin,threshold:0})}catch(a){return this.doneOnce=!0,this.observer=void 0,void this.callback(null)}t.context.$nextTick((function(){Object(o["B"])((function(){e.observer&&e.observer.observe(e.el)}))}))}}},{key:"handler",value:function(t){var e=t?t[0]:{},a=Boolean(e.isIntersecting||e.intersectionRatio>0);a!==this.visible&&(this.visible=a,this.callback(a),this.once&&this.visible&&(this.doneOnce=!0,this.stop()))}},{key:"stop",value:function(){this.observer&&this.observer.disconnect(),this.observer=null}}]),t}(),D=function(t){var e=t[O];e&&e.stop&&e.stop(),delete t[O]},I=function(t,e,a){var i=e.value,s=e.modifiers,r={margin:"0px",once:!1,callback:i};Object(u["h"])(s).forEach((function(t){_["d"].test(t)?r.margin="".concat(t,"px"):"once"===t.toLowerCase()&&(r.once=!0)})),D(t),t[O]=new x(t,r,a),t[O]._prevModifiers=Object(u["b"])(s)},L=function(t,e,a){var i=e.value,s=e.oldValue,r=e.modifiers;r=Object(u["b"])(r),!t||i===s&&t[O]&&Object(k["a"])(r,t[O]._prevModifiers)||I(t,{value:i,modifiers:r},a)},B=function(t){D(t)},P={bind:I,componentUpdated:L,unbind:B};function E(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function A(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?E(Object(a),!0).forEach((function(e){M(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function M(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var F=Object(d["d"])(Object(u["m"])(A(A(A(A(A(A({},v["b"]),h["b"]),f["b"]),m["b"]),g["b"]),{},{maxRows:Object(d["c"])(r["m"]),noAutoShrink:Object(d["c"])(r["g"],!1),noResize:Object(d["c"])(r["g"],!1),rows:Object(d["c"])(r["m"],2),wrap:Object(d["c"])(r["r"],"soft")})),s["F"]),z=i["default"].extend({name:s["F"],directives:{"b-visible":P},mixins:[C["a"],v["a"],y["a"],h["a"],f["a"],m["a"],g["a"],b["a"],p["a"]],props:F,data:function(){return{heightInPx:null}},computed:{computedStyle:function(){var t={resize:!this.computedRows||this.noResize?"none":null};return this.computedRows||(t.height=this.heightInPx,t.overflowY="scroll"),t},computedMinRows:function(){return Object(l["c"])(Object(c["c"])(this.rows,2),2)},computedMaxRows:function(){return Object(l["c"])(this.computedMinRows,Object(c["c"])(this.maxRows,0))},computedRows:function(){return this.computedMinRows===this.computedMaxRows?this.computedMinRows:null},computedAttrs:function(){var t=this.disabled,e=this.required;return{id:this.safeId(),name:this.name||null,form:this.form||null,disabled:t,placeholder:this.placeholder||null,required:e,autocomplete:this.autocomplete||null,readonly:this.readonly||this.plaintext,rows:this.computedRows,wrap:this.wrap||null,"aria-required":this.required?"true":null,"aria-invalid":this.computedAriaInvalid}},computedListeners:function(){return A(A({},this.bvListeners),{},{input:this.onInput,change:this.onChange,blur:this.onBlur})}},watch:{localValue:function(){this.setHeight()}},mounted:function(){this.setHeight()},methods:{visibleCallback:function(t){t&&this.$nextTick(this.setHeight)},setHeight:function(){var t=this;this.$nextTick((function(){Object(o["B"])((function(){t.heightInPx=t.computeHeight()}))}))},computeHeight:function(){if(this.$isServer||!Object(n["g"])(this.computedRows))return null;var t=this.$el;if(!Object(o["u"])(t))return null;var e=Object(o["k"])(t),a=Object(c["b"])(e.lineHeight,1),i=Object(c["b"])(e.borderTopWidth,0)+Object(c["b"])(e.borderBottomWidth,0),s=Object(c["b"])(e.paddingTop,0)+Object(c["b"])(e.paddingBottom,0),r=i+s,u=a*this.computedMinRows+r,d=Object(o["m"])(t,"height")||e.height;Object(o["F"])(t,"height","auto");var h=t.scrollHeight;Object(o["F"])(t,"height",d);var b=Object(l["c"])((h-s)/a,2),f=Object(l["d"])(Object(l["c"])(b,this.computedMinRows),this.computedMaxRows),m=Object(l["c"])(Object(l["a"])(f*a+r),u);return this.noAutoShrink&&Object(c["b"])(d,0)>m?d:"".concat(m,"px")}},render:function(t){return t("textarea",{class:this.computedClass,style:this.computedStyle,directives:[{name:"b-visible",value:this.visibleCallback,modifiers:{640:!0}}],attrs:this.computedAttrs,domProps:{value:this.localValue},on:this.computedListeners,ref:"input"})}})},baaa:function(t,e,a){"use strict";a("739b")},c845:function(t,e,a){},e81c:function(t,e,a){"use strict";a("c845")}}]);
//# sourceMappingURL=chunk-6c06e0fa.dc6c9834.js.map